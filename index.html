<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>支出メモ</title>
</head>
<body>

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="apple-mobile-web-app-capable" content="yes">

<h2>支出記録</h2>

日付: <input type="date" id="date"><br><br>
金額: <input type="number" id="amount"><br><br>

支払い方法:
<select id="account">
  <option value="自分カード">自分カード</option>
  <option value="家族カード">家族カード</option>
  <option value="現金">現金</option>
</select>
<br><br>

メモ: <input type="text" id="memo"><br><br>

<button onclick="addRecord()">追加</button>

<h3>記録一覧</h3>
<ul id="list"></ul>

<h3>今月合計</h3>
現金: <span id="cashTotal">0</span>円<br>
カード: <span id="cardTotal">0</span>円

<script>
let records = JSON.parse(localStorage.getItem("records")) || [];
updateDisplay();

function addRecord() {
  const date = document.getElementById("date").value;
  const amount = Number(document.getElementById("amount").value);
  const account = document.getElementById("account").value;
  const memo = document.getElementById("memo").value;

  if (!date || !amount) return;

records.push({ date, amount, account, memo });
localStorage.setItem("records", JSON.stringify(records));
updateDisplay();

}

function updateDisplay() {
  const list = document.getElementById("list");
  list.innerHTML = "";

  let cash = 0;
  let card = 0;

  records.forEach((r, index) => {
    const li = document.createElement("li");

    li.innerHTML = `
      ${r.date} ${r.account} ${r.amount}円 ${r.memo}
      <button onclick="deleteRecord(${index})">削除</button>
    `;

    list.appendChild(li);

    if (r.account === "現金") cash += r.amount;
    else card += r.amount;

  });

  document.getElementById("cashTotal").textContent = cash;
  document.getElementById("cardTotal").textContent = card;
}

function deleteRecord(index) {
  records.splice(index, 1);
  localStorage.setItem("records", JSON.stringify(records));
  updateDisplay();
}


</script>
</body>
</html>
